<div class="container">
  <h1>
    {{ $any(entry)['_id'] ? 'Edit' : 'New' }}
    Entry
  </h1>
  <div class="form">
    <div class="mb-3">
      <label class="form-label" for="typeInput">Type</label>
      <div class="input-group">
        @if (!customType) {
          <select class="form-control" id="typeInput" [(ngModel)]="entry.type">
            @for (type of types; track type) {
              <option [ngValue]="type">{{ type }}</option>
            }
          </select>
        } @else {
          <input type="text" class="form-control" id="typeInput" [(ngModel)]="entry.type">
        }
        <div class="input-group-text">
          <div class="form-check">
            <input type="checkbox" [(ngModel)]="customType" class="form-check-input" id="customCheck">
            <label class="form-check-label" for="customCheck">Custom</label>
          </div>
        </div>
      </div>
    </div>
    <div class="mb-3">
      <label class="form-label" for="nameInput">Name</label>
      <input type="text" class="form-control" id="nameInput" [(ngModel)]="entry.name">
    </div>
    <div class="mb-3">
      <label class="form-label" for="imageUrlInput">Image URL</label>
      <input type="url" class="form-control" id="imageUrlInput" [(ngModel)]="entry.imageUrl">
    </div>
    <div class="mb-3">
      <label class="form-label" for="descriptionInput">Description</label>
      <textarea class="form-control" id="descriptionInput" [(ngModel)]="entry.description"></textarea>
    </div>
    <div class="mb-3">
      <label class="form-label" for="propertiesTable">Properties</label>
      <table class="table table-sm" id="propertiesTable">
        <thead>
        <tr>
          <th>Property</th>
          <th>Value</th>
        </tr>
        </thead>
        <tbody>
          @for (property of properties; track property) {
            <tr>
              <td>
                <input type="text" class="form-control" [(ngModel)]="property[0]">
              </td>
              <td>
                <input type="text" class="form-control" [(ngModel)]="property[1]">
              </td>
            </tr>
          }
        </tbody>
        <tfoot>
        <tr>
          <td>
            <button type="button" class="btn btn-success ml-auto" (click)="addProperty()">
              Add Row
            </button>
          </td>
        </tr>
        </tfoot>
      </table>
    </div>
    <button type="button" class="btn btn-primary me-2" (click)="save()">
      Save
    </button>
    <a class="btn btn-secondary me-2" routerLink="..">
      Cancel
    </a>
    @if ($any(entry)._id) {
      <button type="button" class="btn btn-danger me-2" (click)="delete()">
        Delete
      </button>
    }
  </div>
</div>
